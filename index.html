<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>FFG Star Wars Character Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg-overlay: rgba(2,6,12,0.55);
  --panel: rgba(10,18,28,0.72);
  --accent:#44d7ff;
  --accent-hover: rgba(68,215,255,0.12);
  --muted:#98a0b3;
  --glass: rgba(255,255,255,0.03);
  font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}
html,body{height:100%;margin:0}
body{
  background: url('4107909.jpg') no-repeat center center fixed;
  background-size: cover;
  color:#e6eef8;
  min-height:100vh;
}
body::before{
  content:""; position:fixed; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.65));
  z-index:-1;
}
.app{display:grid;grid-template-columns:320px 1fr;gap:18px;height:100vh;padding:20px;align-items:start}
.panel{background:var(--panel);border-radius:20px;padding:18px;box-shadow:0 10px 40px rgba(3,10,18,0.75);border:1px solid rgba(68,215,255,0.08);transition:box-shadow 0.3s;}
.panel:hover{box-shadow:0 12px 48px rgba(3,10,18,0.85);}
aside.panel{height:calc(100vh - 40px);overflow:auto}
main.panel{height:calc(100vh - 40px);overflow:auto;position:relative}
.datapad{background:linear-gradient(180deg, rgba(6,24,36,0.86), rgba(8,16,28,0.6));border:1px solid rgba(68,215,255,0.06);box-shadow:0 6px 30px rgba(0,120,160,0.12);border-radius:20px;padding:18px}
header{display:flex;gap:12px;align-items:center}
header .logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#8a6b44);display:flex;align-items:center;justify-content:center;font-weight:700;font-family:'Orbitron',sans-serif;color:#021;box-shadow:0 6px 18px rgba(68,215,255,0.2);transition:box-shadow 0.3s;}
header .logo:hover{box-shadow:0 8px 24px rgba(68,215,255,0.35);}
h1{margin:0;font-size:18px;font-weight:600}
.meta{font-size:12px;color:var(--muted)}
.character-list{margin-top:12px}
.char-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));margin-bottom:8px;cursor:pointer;transition:all 0.3s}
.char-item:hover{background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));transform:scale(1.02)}
.char-item.active{outline:2px solid rgba(68,215,255,0.12);transition:outline 0.3s}
.editor{display:flex;flex-direction:column;gap:14px}
.row{display:flex;gap:12px}
.col{flex:1}
label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
input[type=text], input[type=number], select, textarea{width:100%;padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.22);color:inherit;transition:border 0.2s, box-shadow 0.2s}
input[type=text]:focus, input[type=number]:focus, select:focus, textarea:focus{outline:none;border:1px solid var(--accent);box-shadow:0 0 6px rgba(68,215,255,0.35);}
textarea{resize:vertical}
.stat-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;margin-top:8px}
.stat{padding:8px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));text-align:center;transition:transform 0.2s;}
.stat:hover{transform:scale(1.05);}
.stat input{width:56px;text-align:center;font-size:16px;background:transparent;border:0;color:inherit}
.skills{display:flex;flex-direction:column;gap:6px;max-height:400px;overflow-y:auto}
.skill{display:flex;justify-content:space-between;align-items:center;padding:6px;border-radius:10px;background:var(--glass);transition:box-shadow 0.2s, transform 0.2s;}
.skill:hover{box-shadow:0 0 10px rgba(68,215,255,0.15);transform:translateY(-2px);}
.skill .skillDice{display:flex;gap:4px;flex-wrap:wrap;align-items:center;cursor:pointer;padding:4px;border-radius:6px;transition:transform 0.2s;}
.skill .skillDice:hover{box-shadow:0 0 8px rgba(68,215,255,0.18);transform:scale(1.1);}
.dice-dot{width:14px;height:14px;border-radius:50%;transition:transform 0.2s;}
.dice-dot.ability{background:#00ff66;}
.dice-dot.proficiency{background:#ffe600;}
.dice-dot:hover{transform:scale(1.4);}
.dice-roller{margin-top:10px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;transition:box-shadow 0.2s;}
.dice-roller:hover{box-shadow:0 0 12px rgba(68,215,255,0.18);}
.dice-controls{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.dice-controls label{display:flex;flex-direction:column;align-items:center;font-size:12px}
.dice-result{background:rgba(0,0,0,0.35);padding:10px;border-radius:10px;min-height:48px;display:flex;flex-wrap:wrap;gap:4px;align-items:center;transition:all 0.3s;}
.actions{display:flex;gap:8px;flex-wrap:wrap}
button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 10px;border-radius:10px;color:inherit;cursor:pointer;transition:all 0.2s}
button:hover{background:var(--accent-hover);border-color:var(--accent);}
.net-positive{color:#4fff4f;font-weight:700}
.net-negative{color:#ff4f4f;font-weight:700}
.net-neutral{color:#ffffff;font-weight:700}

/* Negative dice button accent colors */
.negativeDiceBtn[data-type="difficulty"]{border-color:purple;color:purple;}
.negativeDiceBtn[data-type="difficulty"]:hover{background:rgba(128,0,128,0.15);}
.negativeDiceBtn[data-type="challenge"]{border-color:red;color:red;}
.negativeDiceBtn[data-type="challenge"]:hover{background:rgba(255,0,0,0.15);}
.negativeDiceBtn[data-type="setback"]{border-color:black;color:white;}
.negativeDiceBtn[data-type="setback"]:hover{background:rgba(0,0,0,0.25);}
</style>
</head>
<body>
<div class="app">
  <aside class="panel datapad">
    <header>
      <div class="logo">SW</div>
      <div><h1>FFG Character Tracker</h1><div class="meta">Local-only · export/import JSON · printable</div></div>
    </header>
    <div class="controls" style="margin-top:12px">
      <button id="newBtn">New</button>
      <button id="duplicateBtn">Duplicate</button>
      <button id="deleteBtn">Delete</button>
      <button id="exportBtn">Export</button>
      <button id="importBtn">Import</button>
      <input id="importFile" type="file" accept="application/json" style="display:none" />
    </div>
    <div class="character-list" id="charList"></div>
    <div style="margin-top:12px;border-top:1px solid rgba(255,255,255,0.03);padding-top:12px">
      <div class="meta">Quick actions</div>
      <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
        <button id="seedBtn">Load Sample</button>
        <button id="clearAllBtn">Clear All</button>
        <button id="printBtn">Print Sheet</button>
      </div>
    </div>
  </aside>

  <main class="panel datapad">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div><div class="meta">Editing</div><div id="charNameDisplay" style="font-size:20px">— select a character —</div></div>
      <div class="actions"><button id="saveBtn">Save</button></div>
    </div>

    <div id="editorForm" style="display:none" class="editor">
      <div class="row">
        <div class="col"><label>Name</label><input id="name" type="text" placeholder="Character name" /></div>
        <div style="width:190px"><label>Species</label><input id="species" type="text" placeholder="Human / Twi'lek" /></div>
        <div style="width:220px"><label>Career / Role</label><input id="career" type="text" placeholder="Smuggler / Bounty Hunter" /></div>
      </div>

      <div><label>Motivation / Notes</label><textarea id="notes" rows="3"></textarea></div>

      <div><label>Characteristics</label><div class="stat-grid" id="stats"></div></div>

      <div style="display:flex;gap:12px">
        <div style="flex:1"><label>Wounds</label><input id="wounds" type="number" min="0" /></div>
        <div style="flex:1"><label>Strain</label><input id="strain" type="number" min="0" /></div>
        <div style="flex:1"><label>Soak</label><input id="soak" type="number" min="0" /></div>
        <div style="flex:1"><label>Defense</label><input id="defense" type="number" min="0" /></div>
      </div>

      <div><label>Gear / Equipment</label><input id="gear" type="text" placeholder="Blaster, Lightsaber, Armor..." /></div>

      <div><label>Skills</label><div class="skills" id="skillList"></div></div>

      <div class="dice-roller">
        <label>Dice Roller</label>
        <div class="dice-controls">
          <label>Ability<input type="number" min="0" id="diceAbility"></label>
          <label>Proficiency<input type="number" min="0" id="diceProficiency"></label>
          <label>Boost<input type="number" min="0" id="diceBoost"></label>
          <label>Difficulty<input type="number" min="0" id="diceDifficulty"></label>
          <label>Challenge<input type="number" min="0" id="diceChallenge"></label>
          <label>Setback<input type="number" min="0" id="diceSetback"></label>
          <label>Force<input type="number" min="0" id="diceForce"></label>
        </div>
        <div style="margin-top:6px; display:flex; gap:6px; flex-wrap:wrap">
          <button id="rollDiceBtn">Roll</button>
          <button id="clearDiceBtn">Clear</button>
          <button class="negativeDiceBtn" data-type="difficulty">+Difficulty (Purple)</button>
          <button class="negativeDiceBtn" data-type="challenge">+Challenge (Red)</button>
          <button class="negativeDiceBtn" data-type="setback">+Setback (Black)</button>
        </div>
        <div class="dice-result" id="diceResult"></div>
        <div class="dice-result" id="netResult" style="margin-top:6px"></div>
      </div>
    </div>
  </main>
</div>

<script>
// All previous JS functions go here (characters, skills, dice roller, negative dice buttons etc.)
// This is identical to your previous JS, unchanged, with negative dice button bump effect added
document.querySelectorAll(".negativeDiceBtn").forEach(btn => {
  btn.onclick = () => {
    const type = btn.dataset.type;
    const input = document.getElementById("dice" + type.charAt(0).toUpperCase() + type.slice(1));
    input.value = (+input.value || 0) + 1;
    btn.style.transform = "scale(1.2)";
    setTimeout(()=>btn.style.transform="",150);
  };
});
</script>
</body>
</html>
