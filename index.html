<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FFG Star Wars Character Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg-overlay: rgba(2,6,12,0.55);
  --panel: rgba(10,18,28,0.85);
  --accent:#44d7ff;
  --muted:#98a0b3;
  --glass: rgba(255,255,255,0.03);
  --highlight: rgba(68,215,255,0.2);
  font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}
html,body{height:100%;margin:0;overflow:hidden}
body{
  background: url('4107909.jpg') no-repeat center center fixed;
  background-size: cover;
  color:#e6eef8;
  min-height:100vh;
}
body::before{
  content:""; position:fixed; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.7));
  z-index:-1;
}
.app{display:grid;grid-template-columns:340px 1fr;gap:20px;height:100vh;padding:24px;align-items:start;animation:fadeIn 0.8s ease-out}
.panel{
  background:var(--panel);
  border-radius:16px;
  padding:18px;
  box-shadow:0 12px 40px rgba(0,0,0,0.7);
  border:1px solid rgba(68,215,255,0.1);
  backdrop-filter: blur(4px);
  transform:translateY(10px);
  opacity:0;
  animation:slideFadeIn 0.6s forwards;
}
aside.panel{height:calc(100vh - 48px);overflow:auto}
main.panel{height:calc(100vh - 48px);overflow:auto;position:relative}

header{display:flex;gap:12px;align-items:center;margin-bottom:12px}
header .logo{
  width:60px;height:60px;border-radius:12px;
  background:linear-gradient(135deg,var(--accent),#8a6b44);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-family:'Orbitron',sans-serif;color:#021;
  box-shadow:0 6px 18px rgba(68,215,255,0.1);
  font-size:20px;
}
h1{margin:0;font-size:18px}
.meta{font-size:12px;color:var(--muted)}

.character-list{margin-top:16px}
.char-item{
  display:flex;justify-content:space-between;align-items:center;
  padding:10px;border-radius:12px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  margin-bottom:8px;cursor:pointer;
  transition:all 0.2s;
}
.char-item:hover{background:var(--highlight);transform:translateX(3px);box-shadow:0 0 12px var(--accent);}
.char-item.active{outline:2px solid var(--accent)}

.editor{display:flex;flex-direction:column;gap:14px}
.row{display:flex;gap:14px}
.col{flex:1}
label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
input[type=text], input[type=number], select, textarea{
  width:100%;padding:8px;border-radius:8px;
  border:1px solid rgba(255,255,255,0.06);
  background:rgba(0,0,0,0.22);color:inherit;
  transition:0.2s;
}
input[type=text]:focus,input[type=number]:focus,textarea:focus{border-color:var(--accent);box-shadow:0 0 6px var(--accent);}
textarea{resize:vertical}

.stat-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:10px;margin-top:10px}
.stat{
  padding:10px;border-radius:10px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  text-align:center;
  transition:all 0.3s;
}
.stat:hover{background:var(--highlight);transform:scale(1.03);box-shadow:0 0 8px var(--accent);}
.stat input{width:56px;text-align:center;font-size:16px;background:transparent;border:0;color:inherit}

.skills{display:flex;flex-direction:column;gap:6px;max-height:400px;overflow-y:auto}
.skill{display:flex;justify-content:space-between;align-items:center;padding:6px;border-radius:8px;background:var(--glass);transition:all 0.2s}
.skill:hover{background:var(--highlight);transform:scale(1.02)}
.skill .skillDice{display:flex;gap:4px}
.dice-dot{width:16px;height:16px;border-radius:50%;display:inline-block;border:1px solid rgba(255,255,255,0.15);vertical-align:middle}
.dice-dot.ability{background:green}
.dice-dot.proficiency{background:yellow}
.dice-dot.boost{background:blue}
.dice-dot.force{background:white;border:1px solid #ccc}

.dice-roller{margin-top:12px;padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 4px 20px rgba(0,120,160,0.1);}
.dice-controls{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.dice-controls label{display:flex;flex-direction:column;align-items:center;font-size:12px}

.dice-result{background:rgba(0,0,0,0.25);padding:10px;border-radius:8px;min-height:48px;display:flex;flex-wrap:wrap;gap:2px;align-items:center;box-shadow:inset 0 0 6px rgba(68,215,255,0.1);}
.dice-result img{opacity:0; animation:fadeInUp 0.4s forwards;}
.net-result{margin-top:8px;font-weight:600;font-size:14px;transition:all 0.3s;transform:scale(1)}
.net-positive{color:#4caf50; animation:netPop 0.4s forwards;}
.net-negative{color:#f44336; animation:netPop 0.4s forwards;}
.net-neutral{color:#fff; animation:netPop 0.4s forwards;}

.actions{display:flex;gap:8px;flex-wrap:wrap}
button{
  background:transparent;border:1px solid rgba(255,255,255,0.08);
  padding:6px 12px;border-radius:10px;color:inherit;
  cursor:pointer;transition:all 0.2s;
}
button:hover{border-color:var(--accent);background:var(--highlight);}

/* ====== ANIMATIONS ====== */
@keyframes fadeIn{from{opacity:0} to{opacity:1}}
@keyframes slideFadeIn{from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)}}
@keyframes netPop{0%{transform:scale(0.8);opacity:0} 100%{transform:scale(1);opacity:1}}
</style>
</head>
<body>
<div class="app">
<aside class="panel datapad">
<header>
<div class="logo">SW</div>
<div><h1>FFG Character Tracker</h1><div class="meta">Local-only · export/import JSON · printable</div></div>
</header>
<div class="controls" style="margin-top:12px">
<button id="newBtn">New</button>
<button id="duplicateBtn">Duplicate</button>
<button id="deleteBtn">Delete</button>
<button id="exportBtn">Export</button>
<button id="importBtn">Import</button>
<input id="importFile" type="file" accept="application/json" style="display:none" />
</div>
<div class="character-list" id="charList"></div>
<div style="margin-top:12px;border-top:1px solid rgba(255,255,255,0.03);padding-top:12px">
<div class="meta">Quick actions</div>
<div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
<button id="seedBtn">Load Sample</button>
<button id="clearAllBtn">Clear All</button>
<button id="printBtn">Print Sheet</button>
</div>
</div>
</aside>

<main class="panel datapad">
<div style="display:flex;justify-content:space-between;align-items:center">
<div><div class="meta">Editing</div><div id="charNameDisplay" style="font-size:20px">— select a character —</div></div>
<div class="actions"><button id="saveBtn">Save</button></div>
</div>

<div id="editorForm" style="display:none" class="editor">
<div class="row">
<div class="col">
<label>Name</label>
<input id="name" type="text" placeholder="Character name" />
</div>
<div style="width:190px">
<label>Species</label>
<input id="species" type="text" placeholder="Human / Twi'lek" />
</div>
<div style="width:220px">
<label>Career / Role</label>
<input id="career" type="text" placeholder="Smuggler / Bounty Hunter" />
</div>
</div>

<div>
<label>Motivation / Notes</label>
<textarea id="notes" rows="3"></textarea>
</div>

<div>
<label>Characteristics</label>
<div class="stat-grid" id="stats"></div>
</div>

<div style="display:flex;gap:12px">
<div style="flex:1"><label>Wounds</label><input id="wounds" type="number" min="0" /></div>
<div style="flex:1"><label>Strain</label><input id="strain" type="number" min="0" /></div>
<div style="flex:1"><label>Soak</label><input id="soak" type="number" min="0" /></div>
<div style="flex:1"><label>Defense</label><input id="defense" type="number" min="0" /></div>
</div>

<div>
<label>Gear / Equipment</label>
<input id="gear" type="text" placeholder="Blaster, Lightsaber, Armor..." />
</div>

<div>
<label>Skills</label>
<div class="skills" id="skillList"></div>
</div>

<div class="dice-roller">
<label>Dice Roller</label>
<div class="dice-controls">
<label>Ability<input type="number" min="0" id="diceAbility"></label>
<label>Proficiency<input type="number" min="0" id="diceProficiency"></label>
<label>Boost<input type="number" min="0" id="diceBoost"></label>
<label>Difficulty<input type="number" min="0" id="diceDifficulty"></label>
<label>Challenge<input type="number" min="0" id="diceChallenge"></label>
<label>Setback<input type="number" min="0" id="diceSetback"></label>
<label>Force<input type="number" min="0" id="diceForce"></label>
</div>
<div style="margin-top:6px">
<button id="rollDiceBtn">Roll</button>
<button id="clearDiceBtn">Clear</button>
</div>
<div class="dice-result" id="diceResult"></div>
<div class="net-result" id="netResult"></div>
</div>
</main>
</div>

<script>
// ================== CHARACTER DATA ==================
const ALL_SKILLS=[
"Astrogation","Athletics","Brawl","Computers","Coordination","Cool","Deception","Discipline",
"Leadership","Mechanics","Medicine","Negotiation","Perception","Piloting (Planetary)","Piloting (Space)",
"Resilience","Skulduggery","Stealth","Streetwise","Survival","Vigilance","Lightsaber"
];
const skillAttributes = {
"Brawn":["Athletics","Brawl","Resilience"],
"Agility":["Piloting (Planetary)","Piloting (Space)","Coordination","Stealth"],
"Intellect":["Computers","Mechanics","Medicine","Negotiation","Perception","Astrogation"],
"Cunning":["Deception","Skulduggery","Streetwise","Survival"],
"Willpower":["Discipline","Leadership","Vigilance"],
"Presence":["Cool","Charm"]
};

let characters=[],selectedIndex=null;

// ================== DICE FACES ==================
const diceFaces={
ability:["green_blank.jpg","green_success.jpg","green_success.jpg","green_success_success.jpg","green_success_adv.jpg","green_advantage.jpg","green_advantage.jpg","green_advantage_advantage.jpg"],
proficiency:["yellow_blank.jpg","yellow_success.jpg","yellow_success.jpg","yellow_success_adv.jpg","yellow_success_adv.jpg","yellow_success_adv.jpg","yellow_success_success.jpg","yellow_success_success.jpg","yellow_advantage.jpg","yellow_advantage.jpg","yellow_advantage.jpg","yellow_triumph.jpg"],
difficulty:["purple_blank.jpg","purple_failure.jpg","purple_failure_failure.jpg","purple_failure_threat.jpg","purple_threat.jpg","purple_threat.jpg","purple_threat_threat.jpg","purple_failure_threat.jpg"],
challenge:["red_blank.jpg","red_failure.jpg","red_failure.jpg","red_failure_failure.jpg","red_failure_failure.jpg","red_failure_threat.jpg","red_failure_threat.jpg","red_threat.jpg","red_threat.jpg","red_threat_threat.jpg","red_failure_threat.jpg","red_despair.jpg"],
boost:["blue_blank.jpg","blue_success.jpg","blue_success.jpg","blue_success_adv.jpg","blue_advantage.jpg","blue_advantage.jpg","blue_advantage_advantage.jpg"],
setback:["black_blank.jpg","black_failure.jpg","black_failure.jpg","black_threat.jpg","black_threat.jpg"],
force:["white_blank.jpg","white_light.jpg","white_light.jpg","white_dark.jpg","white_dark.jpg"]
};

// ================== HELPER FUNCTIONS ==================
function createStatGrid(){
  const statsContainer = document.getElementById("stats");
  statsContainer.innerHTML="";
  ["Brawn","Agility","Intellect","Cunning","Willpower","Presence"].forEach(stat=>{
    const div = document.createElement("div");
    div.className="stat";
    div.innerHTML=`<label>${stat}</label><input type="number" min="0" value="0" id="stat-${stat}">`;
    statsContainer.appendChild(div);
  });
}

function createSkillList(){
  const skillList = document.getElementById("skillList");
  skillList.innerHTML="";
  ALL_SKILLS.forEach(skill=>{
    const div=document.createElement("div");
    div.className="skill";
    div.innerHTML=`<span>${skill}</span><span class="skillDice">0</span>`;
    skillList.appendChild(div);
  });
}

// ================== DICE ROLLER ==================
function rollDice(){
  const counts={
    ability:+document.getElementById("diceAbility").value||0,
    proficiency:+document.getElementById("diceProficiency").value||0,
    boost:+document.getElementById("diceBoost").value||0,
    difficulty:+document.getElementById("diceDifficulty").value||0,
    challenge:+document.getElementById("diceChallenge").value||0,
    setback:+document.getElementById("diceSetback").value||0,
    force:+document.getElementById("diceForce").value||0
  };

  const result={success:0,advantage:0,failure:0,threat:0,triumph:0,despair:0,light:0,dark:0};
  const diceMap={
    ability:'ability',proficiency:'proficiency',boost:'boost',difficulty:'difficulty',challenge:'challenge',setback:'setback',force:'force'
  };

  for(const [die,count] of Object.entries(counts)){
    for(let i=0;i<count;i++){
      const faces=diceFaces[diceMap[die]];
      const roll=Math.floor(Math.random()*faces.length);
      const face=faces[roll];
      // Map images to results
      if(face.includes("success")) result.success++;
      if(face.includes("failure")) result.failure++;
      if(face.includes("advantage")) result.advantage++;
      if(face.includes("threat")) result.threat++;
      if(face.includes("triumph")){ result.triumph++; result.success++; }
      if(face.includes("despair")){ result.despair++; result.failure++; }
      if(face.includes("light")) result.light++;
      if(face.includes("dark")) result.dark++;
    }
  }

  const diceResult = document.getElementById("diceResult");
  diceResult.innerHTML=`<div>Success: ${result.success}, Failure: ${result.failure}, Advantage: ${result.advantage}, Threat: ${result.threat}, Triumph: ${result.triumph}, Despair: ${result.despair}</div>`;

  const netResult=document.getElementById("netResult");
  const netSuccess=result.success-result.failure;
  const netAdv=result.advantage-result.threat;
  netResult.innerHTML=`Net Success: <span class="${netSuccess>0?'net-positive':netSuccess<0?'net-negative':'net-neutral'}">${netSuccess}</span> | Net Advantage: <span class="${netAdv>0?'net-positive':netAdv<0?'net-negative':'net-neutral'}">${netAdv}</span> | Triumph: ${result.triumph} | Despair: ${result.despair}`;
}

// ================== BUTTON EVENTS ==================
document.getElementById("rollDiceBtn").addEventListener("click",rollDice);
document.getElementById("clearDiceBtn").addEventListener("click",()=>{
  document.getElementById("diceResult").innerHTML="";
  document.getElementById("netResult").innerHTML="";
});

// Initialize
createStatGrid();
createSkillList();
</script>
</body>
</html>
